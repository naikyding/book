<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>compositon api | NIKEDIN</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" type="image/png" sizes="16x16" href="/book/favicon.png">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/book/assets/css/0.styles.7685bb07.css" as="style"><link rel="preload" href="/book/assets/js/app.e3bb5bdc.js" as="script"><link rel="preload" href="/book/assets/js/3.aa458023.js" as="script"><link rel="preload" href="/book/assets/js/1.1a82d67a.js" as="script"><link rel="preload" href="/book/assets/js/113.22fbddad.js" as="script"><link rel="prefetch" href="/book/assets/js/10.f98c1dd4.js"><link rel="prefetch" href="/book/assets/js/100.54fb846e.js"><link rel="prefetch" href="/book/assets/js/101.9c4b401f.js"><link rel="prefetch" href="/book/assets/js/102.f4b93ca5.js"><link rel="prefetch" href="/book/assets/js/103.32f35735.js"><link rel="prefetch" href="/book/assets/js/104.39202033.js"><link rel="prefetch" href="/book/assets/js/105.e65843e9.js"><link rel="prefetch" href="/book/assets/js/106.120fb506.js"><link rel="prefetch" href="/book/assets/js/107.a76053a7.js"><link rel="prefetch" href="/book/assets/js/108.9aaf0aa7.js"><link rel="prefetch" href="/book/assets/js/109.8ab8efbf.js"><link rel="prefetch" href="/book/assets/js/11.f35b317c.js"><link rel="prefetch" href="/book/assets/js/110.7d7607d0.js"><link rel="prefetch" href="/book/assets/js/111.d63d8202.js"><link rel="prefetch" href="/book/assets/js/112.5825cb65.js"><link rel="prefetch" href="/book/assets/js/114.2782bfda.js"><link rel="prefetch" href="/book/assets/js/115.71c673cd.js"><link rel="prefetch" href="/book/assets/js/116.956f090f.js"><link rel="prefetch" href="/book/assets/js/117.24d43c07.js"><link rel="prefetch" href="/book/assets/js/118.330eb74e.js"><link rel="prefetch" href="/book/assets/js/119.b05c1935.js"><link rel="prefetch" href="/book/assets/js/12.3ef4bafe.js"><link rel="prefetch" href="/book/assets/js/13.5377ab35.js"><link rel="prefetch" href="/book/assets/js/14.5fd4cf9c.js"><link rel="prefetch" href="/book/assets/js/15.9da91cb6.js"><link rel="prefetch" href="/book/assets/js/16.05567529.js"><link rel="prefetch" href="/book/assets/js/17.49abef1c.js"><link rel="prefetch" href="/book/assets/js/18.ec5dce86.js"><link rel="prefetch" href="/book/assets/js/19.598edcb9.js"><link rel="prefetch" href="/book/assets/js/20.aa8f3aa2.js"><link rel="prefetch" href="/book/assets/js/21.27b41ef3.js"><link rel="prefetch" href="/book/assets/js/22.69610a42.js"><link rel="prefetch" href="/book/assets/js/23.3d13b526.js"><link rel="prefetch" href="/book/assets/js/24.46012847.js"><link rel="prefetch" href="/book/assets/js/25.fa3d42d9.js"><link rel="prefetch" href="/book/assets/js/26.83ebcca2.js"><link rel="prefetch" href="/book/assets/js/27.70f0b241.js"><link rel="prefetch" href="/book/assets/js/28.14ff3ceb.js"><link rel="prefetch" href="/book/assets/js/29.55fc75e7.js"><link rel="prefetch" href="/book/assets/js/30.112fa41d.js"><link rel="prefetch" href="/book/assets/js/31.be126aa9.js"><link rel="prefetch" href="/book/assets/js/32.0e05d7ad.js"><link rel="prefetch" href="/book/assets/js/33.6f0bc467.js"><link rel="prefetch" href="/book/assets/js/34.90eb21c6.js"><link rel="prefetch" href="/book/assets/js/35.58a40473.js"><link rel="prefetch" href="/book/assets/js/36.711206d5.js"><link rel="prefetch" href="/book/assets/js/37.52266c0d.js"><link rel="prefetch" href="/book/assets/js/38.9ee8248f.js"><link rel="prefetch" href="/book/assets/js/39.c3ba1f06.js"><link rel="prefetch" href="/book/assets/js/4.1b1d719c.js"><link rel="prefetch" href="/book/assets/js/40.5c9c35e7.js"><link rel="prefetch" href="/book/assets/js/41.a29313d9.js"><link rel="prefetch" href="/book/assets/js/42.719636c4.js"><link rel="prefetch" href="/book/assets/js/43.87a130e4.js"><link rel="prefetch" href="/book/assets/js/44.1d72f8f9.js"><link rel="prefetch" href="/book/assets/js/45.3f4343d0.js"><link rel="prefetch" href="/book/assets/js/46.3b872ef7.js"><link rel="prefetch" href="/book/assets/js/47.418a617e.js"><link rel="prefetch" href="/book/assets/js/48.779d2b81.js"><link rel="prefetch" href="/book/assets/js/49.5fc51681.js"><link rel="prefetch" href="/book/assets/js/5.90de37a3.js"><link rel="prefetch" href="/book/assets/js/50.421aae30.js"><link rel="prefetch" href="/book/assets/js/51.89731a7e.js"><link rel="prefetch" href="/book/assets/js/52.6a722673.js"><link rel="prefetch" href="/book/assets/js/53.c8588cb4.js"><link rel="prefetch" href="/book/assets/js/54.79f068cc.js"><link rel="prefetch" href="/book/assets/js/55.b1c767b3.js"><link rel="prefetch" href="/book/assets/js/56.bc2ffe88.js"><link rel="prefetch" href="/book/assets/js/57.9bf13e32.js"><link rel="prefetch" href="/book/assets/js/58.04016adf.js"><link rel="prefetch" href="/book/assets/js/59.ab816ca2.js"><link rel="prefetch" href="/book/assets/js/6.847f7817.js"><link rel="prefetch" href="/book/assets/js/60.d774dbc8.js"><link rel="prefetch" href="/book/assets/js/61.92de7261.js"><link rel="prefetch" href="/book/assets/js/62.bedb45a6.js"><link rel="prefetch" href="/book/assets/js/63.dcfe25a2.js"><link rel="prefetch" href="/book/assets/js/64.76bf536c.js"><link rel="prefetch" href="/book/assets/js/65.7180eae5.js"><link rel="prefetch" href="/book/assets/js/66.25b632fe.js"><link rel="prefetch" href="/book/assets/js/67.1ed23f09.js"><link rel="prefetch" href="/book/assets/js/68.121dfdd9.js"><link rel="prefetch" href="/book/assets/js/69.7de4c3c1.js"><link rel="prefetch" href="/book/assets/js/7.a0f55dd7.js"><link rel="prefetch" href="/book/assets/js/70.2d5c73dd.js"><link rel="prefetch" href="/book/assets/js/71.9d8f29dd.js"><link rel="prefetch" href="/book/assets/js/72.6635280e.js"><link rel="prefetch" href="/book/assets/js/73.681493b5.js"><link rel="prefetch" href="/book/assets/js/74.a9771ba0.js"><link rel="prefetch" href="/book/assets/js/75.d63db127.js"><link rel="prefetch" href="/book/assets/js/76.07ff144f.js"><link rel="prefetch" href="/book/assets/js/77.7b69516b.js"><link rel="prefetch" href="/book/assets/js/78.7fa35879.js"><link rel="prefetch" href="/book/assets/js/79.ff574b08.js"><link rel="prefetch" href="/book/assets/js/8.a540bdd0.js"><link rel="prefetch" href="/book/assets/js/80.0bdf87fb.js"><link rel="prefetch" href="/book/assets/js/81.c20c60b2.js"><link rel="prefetch" href="/book/assets/js/82.3c11f2ae.js"><link rel="prefetch" href="/book/assets/js/83.453dd443.js"><link rel="prefetch" href="/book/assets/js/84.1b17388d.js"><link rel="prefetch" href="/book/assets/js/85.e655c24a.js"><link rel="prefetch" href="/book/assets/js/86.dc1ed030.js"><link rel="prefetch" href="/book/assets/js/87.dee4e936.js"><link rel="prefetch" href="/book/assets/js/88.71f7fb25.js"><link rel="prefetch" href="/book/assets/js/89.966f1b51.js"><link rel="prefetch" href="/book/assets/js/9.c8c899e6.js"><link rel="prefetch" href="/book/assets/js/90.58b0de96.js"><link rel="prefetch" href="/book/assets/js/91.84b8300b.js"><link rel="prefetch" href="/book/assets/js/92.efb229ef.js"><link rel="prefetch" href="/book/assets/js/93.8a77e36c.js"><link rel="prefetch" href="/book/assets/js/94.ecd1b0db.js"><link rel="prefetch" href="/book/assets/js/95.83942eea.js"><link rel="prefetch" href="/book/assets/js/96.2552eb1a.js"><link rel="prefetch" href="/book/assets/js/97.84713097.js"><link rel="prefetch" href="/book/assets/js/98.9d4871f1.js"><link rel="prefetch" href="/book/assets/js/99.b7bfd512.js">
    <link rel="stylesheet" href="/book/assets/css/0.styles.7685bb07.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>NIKEDIN</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>NIKEDIN</span>
          Â Â 
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/book/" class="home-link router-link-active"><img src="/book/img/profile.png" alt="NIKEDIN" class="logo"> <span class="site-name">NIKEDIN</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/book/vue/" class="nav-link"><i class="iconfont undefined"></i>
  VUE
</a></div><div class="nav-item"><a href="/book/vue3/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  VUE3
</a></div><div class="nav-item"><a href="/book/js/" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></div><div class="nav-item"><a href="/book/nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  NUXT
</a></div><div class="nav-item"><a href="/book/node/" class="nav-link"><i class="iconfont undefined"></i>
  NODE
</a></div><div class="nav-item"><a href="/book/npm/" class="nav-link"><i class="iconfont undefined"></i>
  NPM
</a></div><div class="nav-item"><a href="/book/git/" class="nav-link"><i class="iconfont undefined"></i>
  GIT
</a></div><div class="nav-item"><a href="/book/api/" class="nav-link"><i class="iconfont undefined"></i>
  API
</a></div><div class="nav-item"><a href="/book/deploy/" class="nav-link"><i class="iconfont reco-up"></i>
  DEPLOY
</a></div><div class="nav-item"><a href="https://github.com/naikyding" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><img src="/book/img/profile.png" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    NIKEDIN
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>92</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>191</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/book/vue/" class="nav-link"><i class="iconfont undefined"></i>
  VUE
</a></div><div class="nav-item"><a href="/book/vue3/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  VUE3
</a></div><div class="nav-item"><a href="/book/js/" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></div><div class="nav-item"><a href="/book/nuxt/" class="nav-link"><i class="iconfont undefined"></i>
  NUXT
</a></div><div class="nav-item"><a href="/book/node/" class="nav-link"><i class="iconfont undefined"></i>
  NODE
</a></div><div class="nav-item"><a href="/book/npm/" class="nav-link"><i class="iconfont undefined"></i>
  NPM
</a></div><div class="nav-item"><a href="/book/git/" class="nav-link"><i class="iconfont undefined"></i>
  GIT
</a></div><div class="nav-item"><a href="/book/api/" class="nav-link"><i class="iconfont undefined"></i>
  API
</a></div><div class="nav-item"><a href="/book/deploy/" class="nav-link"><i class="iconfont reco-up"></i>
  DEPLOY
</a></div><div class="nav-item"><a href="https://github.com/naikyding" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>compositon api</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>NIKEDIN</span>
          Â Â 
          <!---->
          2021
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>compositon api</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>NIKEDIN</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2020-12-02</span></i> <!----> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>computed</span><span class="tag-item" data-v-3b7f5bdf>methods</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="setup"><a href="#setup" class="header-anchor">#</a> setup</h2> <p><code>setup</code> æ˜¯ <code>Composition Api</code> çš„å…¥å£ï¼Œä¹Ÿç®—æ˜¯ä¸€å€‹ hookï¼Œ</p> <ul><li><p><code>setup</code> å‡ºç¾çš„æ™‚æ©Ÿ (åœ¨ created ä¹‹å‰)ï¼š</p> <ul><li>vue å¯¦é«”å‰µç«‹</li> <li>åˆå§‹åŒ– <code>props</code></li> <li>èª¿ç”¨ <code>setup</code> âœ…</li></ul></li> <li><h3 id="props"><a href="#props" class="header-anchor">#</a> props</h3> <p><code>setup</code> æä¾›ç¬¬ä¸€å€‹åƒæ•¸ï¼Œå°±æ˜¯ç”±çˆ¶å±¤å‚³é€²çš„ <code>props</code>
å¯ä»¥è—‰ç”±æ­¤è®€å–åˆ° <code>props</code> çš„å€¼</p> <div class="language-js extra-class"><pre class="language-js"><code>props<span class="token operator">:</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> String<span class="token punctuation">,</span>
    required<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h3 id="context"><a href="#context" class="header-anchor">#</a> context</h3> <p><code>setup</code> æä¾›ç¬¬äºŒå€‹åƒæ•¸ç‚º <code>context</code> ç‚ºèª¿å• vue å¯¦ä¾‹çš„åœ°æ–¹ï¼Œå¯ä»¥æä¾› åŸæœ¬ this çš„åŠŸèƒ½</p> <ul><li>emit</li> <li>attrs</li> <li>slot
åƒæœ€å¸¸ä½¿ç”¨åˆ°çš„ <code>$emit</code> å°±æ˜¯è®Šç‚º <code>context.emit</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'set-data'</span><span class="token punctuation">,</span> newData<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <h2 id="ğŸ§°-methods"><a href="#ğŸ§°-methods" class="header-anchor">#</a> ğŸ§° methods</h2> <p>setup å…§ï¼Œç›´æ¥ä½¿ç”¨ å‘½åçš„å‡½å¼ï¼Œå°±æ˜¯ methods</p> <div class="language-vue extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><div class="highlighted">Â </div><br><br><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> reactive <span class="token punctuation">}</span> <span class="token operator">=</span> Vue

<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">plus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value<span class="token operator">++</span>
      obj<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">less</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value<span class="token operator">--</span>
      obj<span class="token punctuation">.</span>count<span class="token operator">--</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> plus<span class="token punctuation">,</span> less <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block warning"><p>methods ä¹Ÿæ˜¯è¦é€²è¡Œå›å‚³æ‰èƒ½è¢«ä½¿ç”¨</p></div> <hr> <h2 id="ğŸ–¥-computed"><a href="#ğŸ–¥-computed" class="header-anchor">#</a> ğŸ–¥ computed</h2> <p>åœ¨ <code>setup</code> ä¸­ï¼Œæ²’æœ‰ <code>computed</code>ï¼Œè®Šæˆè¦å¼•å…¥ <code>computed</code> å‡½å¼ä¾†æ“ä½œé€™å€‹è¨ˆç®—æ–¹æ³•</p> <div class="custom-block warning"><p><strong>computed( <code>()=&gt;{ // è¦å›å‚³çš„è¨ˆç®—å€¼ }</code> )</strong></p></div> <div class="language-vue extra-class"><div class="highlight-lines"><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token operator">=</span> Vue

<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">plus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token number">40</span><span class="token punctuation">)</span>

    <span class="token comment">// const copyObj =</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">,</span>
      plus<span class="token punctuation">,</span>
      total<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="setup-å…§æ“ä½œ-computed"><a href="#setup-å…§æ“ä½œ-computed" class="header-anchor">#</a> setup å…§æ“ä½œ computed</h3> <div class="custom-block danger"><p class="custom-block-title">æ³¨æ„</p> <p>åœ¨ setup è£¡ï¼Œä½¿ç”¨ computed ç”¢ç”Ÿçš„<code>åƒæ•¸</code>æ™‚ï¼Œé‚„æ˜¯éœ€è¦ä½¿ç”¨ <code>.value</code> ä¾†æå–å…§å®¹ã€‚
<strong>ä¸ç„¶æœƒæ˜¯ä¸€å€‹è¢«åŒ…è£çš„ç‰©ä»¶!!(å¦‚ä¸‹)</strong> <img src="/book/img/console_computed.png" alt="swaggerUi"></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> filterList <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> listArr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>money <span class="token operator">&gt;</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> BoxHeight <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> isOpen<span class="token punctuation">.</span>value <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filterList<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">40</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">'0px'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <h2 id="methods-èˆ‡-compouted-é¸æ“‡"><a href="#methods-èˆ‡-compouted-é¸æ“‡" class="header-anchor">#</a> methods èˆ‡ compouted é¸æ“‡?</h2> <p>å…©å€‹æ–¹æ³•éƒ½å¯ä»¥åšåˆ°ä¸€æ¨£çš„äº‹æƒ…ï¼Œä½†åœ¨å…§éƒ¨é‹ä½œå®Œå…¨ä¸åŒ!</p> <ul><li><p>computed (ä¸å¯å‚³å…¥åƒæ•¸) æœƒç·©å­˜<strong>è¨ˆç®—</strong>å¾Œçš„è³‡æ–™ï¼Œåªè¦è³‡æ–™ä¸è®Šå‹•ï¼Œå°±ä¸æœƒå†é‡æ–°åŸ·è¡Œè¨ˆç®—!</p></li> <li><p>methods (å¯ä»¥å‚³å…¥åƒæ•¸ä½¿ç”¨) ä¸æœƒç·©å­˜ï¼Œæ¯æ¬¡éƒ½è¦é‡æ–°åŸ·è¡Œ</p></li></ul> <hr> <h2 id="ğŸ‘‚-watch"><a href="#ğŸ‘‚-watch" class="header-anchor">#</a> ğŸ‘‚ watch</h2> <p>å¯ä»¥é€é <code>watch()</code> ä¾†ç›£è½è³‡æ–™ï¼Œç•¶æŒ‡å®šè³‡æ–™è®Šå‹•æ™‚ï¼Œå°‡æœƒåŸ·è¡Œè£¡é¢çš„<code>å‡½å¼</code>ã€‚</p> <ul><li><h3 id="ç›£è½-ref-è³‡æ–™"><a href="#ç›£è½-ref-è³‡æ–™" class="header-anchor">#</a> ç›£è½ <code>ref</code> è³‡æ–™</h3> <p><code>watch( refè³‡æ–™åç¨±, (æ–°è³‡æ–™, èˆŠè³‡æ–™)=&gt;{ // è®Šå‹•æ™‚åŸ·è¡Œå‡½å¼ } )</code></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> Vue

<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'Wrold'</span><span class="token punctuation">)</span>

    <span class="token function">watch</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">é€™æ˜¯æ–°çš„å€¼</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> é€™æ˜¯èˆŠçš„å€¼ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">setTitle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        title<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'World'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      title<span class="token punctuation">,</span> text
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>åŒæ™‚ç›£è½å¤šçµ„ <code>ref</code></strong>ï¼Œä½¿ç”¨ <code>[]</code>é™£åˆ—åŒ…èµ·</p> <div class="language-js extra-class"><div class="highlight-lines"><div class="highlighted">Â </div><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>title<span class="token punctuation">,</span> text<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>newTitle<span class="token punctuation">,</span> newText<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>preTitle<span class="token punctuation">,</span> preText<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      title æ–°çš„å€¼ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> èˆŠçš„å€¼: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
      text æ–°çš„å€¼ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> èˆŠçš„å€¼: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>è‹¥ <code>ref</code> ç‚ºç‰©ä»¶</strong>
æ­¤æ™‚å°±è¦<code>ç›£è½çš„å°åƒ</code>ï¼Œå¿…é ˆæ˜¯<strong>å‡½å¼çš„è¿”å›</strong></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    data æ–°çš„å€¼ï¼š </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> , èˆŠçš„å€¼ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">setData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p><code>ref</code> <strong>ç„¡æ³•ç›£æ§</strong> ç‰©ä»¶å‹åˆ¥ <code>ref({})</code>!!</p> <p>åªèƒ½æŒ‡å®šå…§éƒ¨çš„æŸä¸€å€‹å°è±¡ï¼Œä¸”ä½¿ç”¨ <code>() =&gt;</code>(å‡½å¼å›å‚³) æ‰å¯ä»¥ç›£æ§</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Ã—</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// â—‹</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p><strong>ğŸ§¨ æ·±åº¦ç›£æ§æƒæ!! éä¸å¾—å·²ç›£è½æ–¹å¼ï¼Œé€™æ¨£å°±å¯ä»¥ç›£è½åˆ° <code>ref</code> çš„è®Šå‹•ï¼Œä½†éå¸¸è€—æ•ˆèƒ½ï¼Œæ¯æ¬¡éƒ½è¦æƒæå…§éƒ¨è³‡æ–™ã€‚</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> deep<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div></li> <li><h3 id="ç›£è½-reactvie-è³‡æ–™"><a href="#ç›£è½-reactvie-è³‡æ–™" class="header-anchor">#</a> ç›£è½ <code>reactvie</code> è³‡æ–™</h3></li></ul> <p><code>reactive</code> éƒ½æ˜¯ <strong>ç‰©ä»¶å‹åˆ¥</strong>ï¼Œæ‰€ä»¥åœ¨ç›£è½æ•´å€‹ <code>ç‰©ä»¶</code> æ™‚ï¼Œå›èª¿å‡½å¼åªæœƒæœ‰ä¸€å€‹ <code>åƒæ•¸</code> æ›´æ”¹å¾Œçš„å€¼ã€‚</p> <p><code>watch( reactiveData, (newVal) =&gt; { //è¦åŸ·è¡Œçš„äº‹ } )</code></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">é€™æ˜¯æ–°çš„ idï¼š </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">setData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ç›£è½ <code>reactvie</code> å…§éƒ¨ï¼Œå°è±¡å¿…é ˆæ˜¯å‡½å¼å›èª¿ <code>()=&gt;</code></strong></p> <p>é€™å€‹æ™‚å€™ï¼Œåœ¨<strong>å›èª¿å‡½å¼</strong>çš„ <code>åƒæ•¸</code> å¯ä»¥ä½¿ç”¨ <strong>æ–°çš„å€¼èˆ‡èˆŠçš„å€¼</strong>ã€‚</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    é€™æ˜¯æ–°çš„ idï¼š </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    é€™æ˜¯èˆŠçš„ id: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">setData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ç›£è½å¤šçµ„ <code>reactive</code></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data2<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>newData<span class="token punctuation">,</span> newData2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>oldData<span class="token punctuation">,</span> oldData2<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="custom-block danger"><p>æœ‰æ™‚è³‡æ–™æœ‰æ›´å‹•ï¼Œä½† <code>watch</code> æ²’æœ‰å‹•éœï¼Œå¯èƒ½æ˜¯è³‡æ–™å¤ªæ·±å±¤ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>{ deep: true }</code>
ä¾†ç›£è½æ›´æ·±å±¤çš„è³‡æ–™ã€‚</p></div> <h2 id="ğŸ‘wawtcheffect-è¿½è¹¤ç›£è½"><a href="#ğŸ‘wawtcheffect-è¿½è¹¤ç›£è½" class="header-anchor">#</a> ğŸ‘wawtchEffect è¿½è¹¤ç›£è½</h2> <p>åªè¦è¢«è¨­ç½®ï¼Œè¼‰å…¥é é¢æ™‚å°±æœƒé‹ä½œï¼Œç•¶å…§éƒ¨<code>æœ‰ä½¿ç”¨çš„è³‡æ–™</code><strong>è®Šæ›´</strong>æ™‚ï¼Œå°±æœƒå†æ¬¡ <strong>èª¿ç”¨</strong></p> <ul><li><h3 id="ç›£è½æ–¹å¼"><a href="#ç›£è½æ–¹å¼" class="header-anchor">#</a> ç›£è½æ–¹å¼</h3> <p>åªè¦è¢«æ”¾å…¥åŸ·è¡Œçš„é …ç›®çš„<strong>è³‡æ–™</strong>ï¼Œå°±æœƒè¢«åŠ å…¥ <strong>è¿½è¹¤ç›£è½</strong>ï¼Œç•¶å…§éƒ¨æœ‰ä»»ä½•ä¸€å€‹è³‡æ–™è¢«æ›´æ–°ï¼Œå°±æœƒé¦¬ä¸ŠåŸ·è¡Œå…§éƒ¨çš„é …ç›®ã€‚</p> <div class="custom-block tip"><p>å»ºç«‹ç›£è½æ™‚ï¼Œè¼‰å…¥é é¢åŒæ™‚ä¹Ÿè¢«åŸ·è¡Œ !!</p></div> <p><code>watchEffect( ()=&gt; { // åŸ·è¡Œé …ç›®(åŒæ™‚å—ç›£è½) } )</code></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// -&gt; è¼‰å…¥é é¢æ™‚å…ˆ logs 0</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">.</span>value<span class="token operator">++</span>
  <span class="token comment">// -&gt; è³‡æ–™è®Šå‹•æ™‚ logs 1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><h3 id="åœæ­¢ç›£è½"><a href="#åœæ­¢ç›£è½" class="header-anchor">#</a> åœæ­¢ç›£è½</h3> <p>ç•¶ <code>watchEffect</code> é€™å€‹æ–¹æ³•ï¼Œåœ¨ <code>setup</code> æˆ– <code>å…¶å®ƒç”Ÿå‘½å‘¨æœŸ</code>æ™‚ï¼Œ
å°‡ <code>watchEffect</code> ç”¨è®Šæ•¸æ¥ä¸‹ï¼Œæƒ³åœæ­¢æ™‚ <strong>åŸ·è¡Œ</strong> é€™å€‹<code>è®Šæ•¸</code></p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted">Â </div><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token comment">// å°‡ watchEffect ç”¨è®Šæ•¸æ¥èµ·</span>
    <span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>count<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åŸ·è¡Œè®Šæ•¸å‡½å¼ï¼Œå°‡åœæ­¢</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// åŸ·è¡Œæ¯ç§’ç´¯åŠ </span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">.</span>value<span class="token operator">++</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><h3 id="åœæ­¢ç›£è½åŸ·è¡Œä¸­çš„éåŒæ­¥"><a href="#åœæ­¢ç›£è½åŸ·è¡Œä¸­çš„éåŒæ­¥" class="header-anchor">#</a> åœæ­¢ç›£è½åŸ·è¡Œä¸­çš„<strong>éåŒæ­¥</strong></h3> <p>æœ‰äº›æ™‚å€™ï¼Œä½ åœæ­¢äº†ç›£è½çš„å‡½å¼é‹ä½œï¼Œä½†å‡½å¼è£¡å¦‚æœæœ‰<strong>éåŒæ­¥å‡½å¼</strong>æ­£åœ¨é‹è¡Œï¼Œé‚„æ˜¯æœƒè¢«å›å‚³ï¼Œé€™æ™‚å°±éœ€è¦æ¸…æ‰ <strong>éåŒæ­¥çš„å‡½å¼é‹è¡Œ</strong></p> <p><strong>å¦‚æœ <code>éåŒæ­¥å‡½å¼</code> æ˜¯ä¸€å€‹è®Šæ•¸</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onInvalidate</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">performAsyncOperation</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token function">onInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// id has changed or watcher is stopped.</span>
    <span class="token comment">// invalidate previously pending async operation</span>
    token<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>å¦‚æœä½¿ç”¨ <code>async</code> <code>await</code></strong></p> <p>è¦åœ¨ <code>await</code> ä¹‹å‰ï¼Œå…ˆè¨»å†Šæ¸…é™¤çš„æ–¹æ³•ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">onInvalidate</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token function">onInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// we register cleanup function before Promise resolves</span>
data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchData</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="https://v3.vuejs.org/guide/reactivity-computed-watchers.html#side-effect-invalidation" target="_blank" rel="noopener noreferrer">åƒè€ƒ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ul> <h2 id="ğŸ†š-watch-vs-watcheffect"><a href="#ğŸ†š-watch-vs-watcheffect" class="header-anchor">#</a> ğŸ†š watch VS watchEffect</h2> <table><thead><tr><th>-</th> <th>watch</th> <th>watchEffect</th></tr></thead> <tbody><tr><td>èªªæ˜</td> <td>è¢«å‹•ç›£è½</td> <td>ä¸»å‹•ç›£è½</td></tr> <tr><td>O</td> <td>å¯ä»¥æ‹¿åˆ°<code>åƒæ•¸</code> æ–°/èˆŠå€¼</td> <td>å¯ä»¥åœæ­¢ç›£è½</td></tr> <tr><td>x</td> <td>ç„¡æ³•åœæ­¢ç›£è½</td> <td>ç„¡æ³•å–<code>åƒæ•¸</code>å¾—æ–°/èˆŠå€¼</td></tr></tbody></table> <h3 id="watch-è½‰-watcheffect"><a href="#watch-è½‰-watcheffect" class="header-anchor">#</a> watch è½‰ watchEffect</h3> <p>ä¸»å‹•ç›£è½æ–¹å¼ =&gt; <code>{immediate: true}</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">watch</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/7/2020, 10:23:12 AM</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/book/assets/js/app.e3bb5bdc.js" defer></script><script src="/book/assets/js/3.aa458023.js" defer></script><script src="/book/assets/js/1.1a82d67a.js" defer></script><script src="/book/assets/js/113.22fbddad.js" defer></script>
  </body>
</html>
